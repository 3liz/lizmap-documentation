Quick start
===========

This is quick start guide to help you how to publish your first dataset on Lizmap with a few knowledge.

Getting QGIS Desktop ready for Lizmap
--------------------------------------

To publish QGIS maps in Lizmap Web Client, Lizmap Web Client needs additional information stored in a specific file:
The Lizmap Config. This file is generated by the Lizmap plugin that you have to install in QGIS Desktop.

#. To install the Lizmap plugin, go to :guilabel:`Plugins` menu and select :guilabel:`Manage and install pluginsâ€¦`.
#. At the top of the dialog, a :guilabel:`Search` function helps you find any plugin, use it to find **Lizmap**.
#. use :guilabel:`Install Plugin`.

https://docs.qgis.org/3.22/en/docs/user_manual/plugins/plugins.html

Preparing your workstation (File organization)
-----------------------------------------------

#. Create a local *lizmap* folder
#. Create in the *lizmap* folder a *media* folder
#. Create in the *lizmap* folder a *my_lizmap_repository* folder
#. Create in the *lizmap/my_lizmap_repository* folder a *media* folder
#. Create in the *lizmap/my_lizmap_repository* folder a *data* folder
#. Copy in the folder *lizmap/my_lizmap_repository/data* the geographic data to publish (SHP, GeoJSON, others files)

You should have this tree structure:

.. code-block:: text

   lizmap/
   +- media/
   +- my_lizmap_repository/
      +- media/
      +- data/
         +- your-geo-data.shp
         +- your-geo-data.shx
         +- your-geo-data.dbf
         +- your-geo-data.prj

Except for the *media* directories, you can change the names of other directories.

Preparing your QGIS project
----------------------------

#. Open *QGIS* Desktop
#. Load data from the folder *lizmap/my_lizmap_repository/data*
#. Save the QGIS project in *lizmap/my_lizmap_repository* with the *.qgs* extension: for example *my-first-lizmap.qgs*
#. Prepare the data rendering (layers order, symbology, labels, etc)
#. Do the QGIS Server configuration of the project :menuselection:`Project Properties --> QGIS Server`: *title* and *abstract*

You should have this tree structure:

.. code-block:: text

   lizmap/
   +- media/
   +- my_lizmap_repository/
      +- media/
      +- data/
         +- your-geo-data.shp
         +- your-geo-data.shx
         +- your-geo-data.dbf
         +- your-geo-data.prj
      +- my-first-lizmap.qgs
      +- my-first-lizmap.qgs.cfg


Do the Lizmap config
----------------------------

#. Open the Lizmap plugin window in QGIS Desktop (Lizmap green icon)
#. Fill the lizmap server with the web credentials
#. Click on the :guilabel:`Layers` tab, click on each layer and click on :guilabel:`checked`.
#. Click on :guilabel:`Apply`

Upload your maps to your Lizmap Web Client
-------------------------------------------

Once your maps are ready, you need to upload them to your Lizmap Web Client.

The way to do it depends on how your server has been prepared: you can use FTP, WebDAV, SSH or others.

You must place the folder *lizmap/my_lizmap_repository* folder set as root repositories for Lizmap.

For example on lizmap.com, you must place it in the *qgis* folder available through FTP.

You should have this tree structure on the lizmap.com server:

.. code-block:: text

   cog/
   qgis/
   +- media/
   +- my_lizmap_repository/
      +- media/
      +- data/
         +- your-geo-data.shp
         +- your-geo-data.shx
         +- your-geo-data.dbf
         +- your-geo-data.prj
      +- my-first-lizmap.qgs
      +- my-first-lizmap.qgs.cfg
   web/

Publishing your maps on the Web
-------------------------------------------

It remains to configure Lizmap Web Client to publish the maps.

#. Open your favorite *web browser* (Firefox, Edge, Chrome, others) and go to the address of your Lizmap Web Client.
#. Click on :guilabel:`login` and authenticate yourself with the administration login
#. Click on :guilabel:`administration`, on the right in the top bar
#. Click on :guilabel:`Map Management` and then click on :guilabel:`Create repository`
#. Fill in the form:

   * Choose the *my_lizmap_directory* from the :guilabel:`Local folder path` list
   * Enter the :guilabel:`Label`: repository label, which will be displayed in the interface
   * Enter the :guilabel:`Id`: Repository unique identifier, must only contain characters between a-z and 0-9 (no space, no special character). This identifier can not be edited later.
   * Click on :guilabel:`Save`

#. Click on all the permission boxes you want and then :guilabel:`Save`
#. Click on :guilabel:`Projects`, the repository label and the name of your map should appear in the list
#. Click on :guilabel:`View map`, and your map will appear.

.. toctree::
  :maxdepth: 3

  project_for_web
  publish
