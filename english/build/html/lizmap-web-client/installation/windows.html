

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing Lizmap on Windows &mdash; Lizmap 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Lizmap 1.0 documentation" href="../../index.html" />
    <link rel="up" title="Installing Lizmap" href="index.html" />
    <link rel="next" title="Administration de Lizmap" href="../administration/index.html" />
    <link rel="prev" title="Installation de Lizmap sous Linux Debian ou Ubuntu" href="linux.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../administration/index.html" title="Administration de Lizmap"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="linux.html" title="Installation de Lizmap sous Linux Debian ou Ubuntu"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Lizmap 1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Lizmap Web Client application</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Installing Lizmap</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installing Lizmap on Windows</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#add-spatiatlite-support-to-php">Add spatiatlite support to PHP</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="linux.html"
                        title="previous chapter">Installation de Lizmap sous Linux Debian ou Ubuntu</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../administration/index.html"
                        title="next chapter">Administration de Lizmap</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/lizmap-web-client/installation/windows.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installing-lizmap-on-windows">
<h1>Installing Lizmap on Windows<a class="headerlink" href="#installing-lizmap-on-windows" title="Permalink to this headline">¶</a></h1>
<p>Cette documentation présente le déroulement de l&#8217;installation de Lizmap Web Client sur un environnement  Windows 7. Les autres versions de Windows ne devraient pas poser de problème. Afin de faciliter l&#8217;installation, nous utilisons le logiciel OSGeo4W, qui permet d&#8217;installer l&#8217;ensemble des composants nécessaires de manière centralisée.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Dans ce document, nous utilisons la version 2.7.0 de Lizmap. Veuillez à adapter en fonction de la version que vous souhaitez installer (la dernière est recommandée)</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Download OSGeo4W on the QGIS download page:</li>
</ol>
<p><a class="reference external" href="http://hub.qgis.org/projects/quantum-gis/wiki/DownloadFr#Installateur-R%C3%A9seau-OSGeo4W">http://hub.qgis.org/projects/quantum-gis/wiki/DownloadFr#Installateur-R%C3%A9seau-OSGeo4W</a></p>
<ol class="arabic simple" start="2">
<li>Run OSGeo4W installer and choose the advanced installation</li>
</ol>
<img alt="../../_images/installation-osgeo4w-01.jpg" class="align-center" src="../../_images/installation-osgeo4w-01.jpg" />
<ol class="arabic simple" start="3">
<li>Use internet installation</li>
</ol>
<img alt="../../_images/installation-osgeo4w-02.jpg" class="align-center" src="../../_images/installation-osgeo4w-02.jpg" />
<ol class="arabic simple" start="4">
<li>Select the root for OSGeo4W elements installation and prefer the option for acces to all users</li>
</ol>
<img alt="../../_images/installation-osgeo4w-03.jpg" class="align-center" src="../../_images/installation-osgeo4w-03.jpg" />
<ol class="arabic simple" start="5">
<li>Select the root of local packages</li>
</ol>
<img alt="../../_images/installation-osgeo4w-04.jpg" class="align-center" src="../../_images/installation-osgeo4w-04.jpg" />
<ol class="arabic simple" start="6">
<li>Specify the type of internet connection(with proxy or not)</li>
</ol>
<img alt="../../_images/installation-osgeo4w-05.jpg" class="align-center" src="../../_images/installation-osgeo4w-05.jpg" />
<ol class="arabic simple" start="7">
<li>Select in &#8216;Desktop&#8217; the package &#8216;QGIS-full&#8217;</li>
</ol>
<img alt="../../_images/installation-osgeo4w-06.jpg" class="align-center" src="../../_images/installation-osgeo4w-06.jpg" />
<ol class="arabic simple" start="8">
<li>Select in &#8216;Web&#8217; the package &#8216;QGIS-server&#8217;</li>
</ol>
<img alt="../../_images/installation-osgeo4w-07.jpg" class="align-center" src="../../_images/installation-osgeo4w-07.jpg" />
<ol class="arabic simple" start="9">
<li>Select in &#8216;Lib&#8217; the package &#8216;fcgi&#8217;</li>
</ol>
<img alt="../../_images/installation-osgeo4w-08.jpg" class="align-center" src="../../_images/installation-osgeo4w-08.jpg" />
<ol class="arabic simple" start="10">
<li>Launch and complete the installation</li>
</ol>
<p>At this stage all that is necessary to LizMap is installed on your computer.
The next steps are to configure the server, install and configure LizMap.</p>
<ol class="arabic simple" start="11">
<li>Checking Apache</li>
</ol>
<p>To verify that the server is well installed, open the address <a class="reference external" href="http://localhost">http://localhost</a> in the browser.</p>
<p>If nothing is displayed that the installation has failed.</p>
<ol class="arabic simple" start="12">
<li>Checking PHP</li>
</ol>
<p>Click on the link &#8216;phpinfo&#8217; on the home page of the OSGeo4W Apache server. This page allows you to check the configuration of your server. You should find information about cgi-fcgi, PDO and PDO_sqlite but not on CURL or GD which depends LizMap.</p>
<img alt="../../_images/installation-osgeo4w-09.jpg" class="align-center" src="../../_images/installation-osgeo4w-09.jpg" />
<img alt="../../_images/installation-osgeo4w-10.jpg" class="align-center" src="../../_images/installation-osgeo4w-10.jpg" />
<ol class="arabic simple" start="13">
<li>Enable CURL and GD2</li>
</ol>
<p>Open the file C:OSGeo4WbinPHP.ini and uncomment the extensions curl and gd2</p>
<img alt="../../_images/installation-osgeo4w-11.jpg" class="align-center" src="../../_images/installation-osgeo4w-11.jpg" />
<ol class="arabic simple" start="14">
<li>Restart Apache</li>
</ol>
<p>Modifying the file C:OSGeo4WbinPHP.ini to activate CURL and GD in PHP, requires to restart the Apache server. To do this,</p>
<ul>
<li><p class="first">click in the windows main menu on the apache monitor &#8216;All programs &gt; OSGeo4W &gt; Apache &gt; OSGeo4W-Apache-Monitor&#8217;</p>
<img alt="../../_images/installation-osgeo4w-12.png" class="align-center" src="../../_images/installation-osgeo4w-12.png" />
</li>
<li><p class="first">Click on the apache monitor that is among the hidden icons in the task bar (bottom right) and on &#8216;Restart&#8217;</p>
<img alt="../../_images/installation-osgeo4w-13.png" class="align-center" src="../../_images/installation-osgeo4w-13.png" />
</li>
</ul>
<ol class="arabic simple" start="16">
<li>Checking CURL and GD</li>
</ol>
<p>In the browser, reload the page &#8216;phpinfo&#8217;. You should find CURL and GD section.</p>
<img alt="../../_images/installation-osgeo4w-14.jpg" class="align-center" src="../../_images/installation-osgeo4w-14.jpg" />
<ol class="arabic simple" start="17">
<li>Download LizMap</li>
</ol>
<p>The LizMap Web Client code is free and downloadable from github. To download the last version:</p>
<ul class="simple">
<li>Go to <a class="reference external" href="https://github.com/3liz/lizmap-web-client/tags">https://github.com/3liz/lizmap-web-client/tags</a></li>
<li>Click on the small link <em>zip</em> of the latest version. For example the following link is for the 2.7.0 version: <a class="reference external" href="https://github.com/3liz/lizmap-web-client/archive/2.7.0.zip">https://github.com/3liz/lizmap-web-client/archive/2.7.0.zip</a></li>
</ul>
<ol class="arabic simple" start="18">
<li>Unzip LizMap in &#8216;C:OSGeo4Wapachehtdocslizmap&#8217;</li>
</ol>
<p>You should now have a folder &#8216;C:OSGeo4Wapachehtdocslizmaplizmap-web-client-2.7.0&#8217;</p>
<ol class="arabic simple" start="19">
<li>Test the Lizmap installation</li>
</ol>
<p>Test whether LizMap is well installed by oppening the address <a class="reference external" href="http://localhost/lizmap/lizmap-web-client-2.7.0/lizmap/www">http://localhost/lizmap/lizmap-web-client-2.7.0/lizmap/www</a> in the browser. You should see the project &#8220;Montpellier&#8221; comes with LizMap and configured to be visible by all. To view the map, it will have to configure LizMap.</p>
<ol class="arabic simple" start="20">
<li>Admin interface</li>
</ol>
<p>Go to <a class="reference external" href="http://localhost/lizmap/lizmap-web-client-2.7.0/lizmap/www/admin.php">http://localhost/lizmap/lizmap-web-client-2.7.0/lizmap/www/admin.php</a> in the browser and connect with the login / password : &#8216;admin/admin&#8217;.</p>
<ol class="arabic simple" start="21">
<li>Modifying the QGIS Server URL</li>
</ol>
<ul class="simple">
<li>Click on &#8216;LizMap config&#8217; then modify in the Services section to specify the QGIS Server url.</li>
<li>Replace the WMS Server url by <a class="reference external" href="http://127.0.0.1/qgis/qgis_mapserv.fcgi.exe">http://127.0.0.1/qgis/qgis_mapserv.fcgi.exe</a> and save :</li>
</ul>
<img alt="../../_images/installation-osgeo4w-17.jpg" class="align-center" src="../../_images/installation-osgeo4w-17.jpg" />
<ol class="arabic simple" start="23">
<li>Verifying</li>
</ol>
<p>To ensure that the configuration was successfull, click on &#8216;Projects list&#8217; on top of the page. You should have acces to two maps since you are logged in as admin. Click on one of the maps. If the configuration is correct you should see the map and be in possession of a LizMap version ready for your maps.</p>
</div>
<div class="section" id="add-spatiatlite-support-to-php">
<h2>Add spatiatlite support to PHP<a class="headerlink" href="#add-spatiatlite-support-to-php" title="Permalink to this headline">¶</a></h2>
<p>Pour pouvoir utiliser les annotations sur des couches spatiatlite, il faut ajouter l&#8217;extension spatialite dans PHP. Malheureusement, il faut une version de PHP au moins égale à la 5.3 pour le faire, et pour l&#8217;instant, l&#8217;installateur OSGeo4W ne propose que la 5.2.</p>
<p><em>Il n&#8217;est donc pas possible pour l&#8217;instant sous Windows d&#8217;utiliser des couches Spatialite pour l&#8217;annotation.</em></p>
<p>Lizmap Web Client teste si le support du spatialite est bien activé dans le PHP. S&#8217;il ne l&#8217;est pas, alors les couches Spatialite ne seront pas utilisables dans l&#8217;outil d&#8217;annotation. Vous pouvez toujours utiliser des données PostGreSQL à la place.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../administration/index.html" title="Administration de Lizmap"
             >next</a> |</li>
        <li class="right" >
          <a href="linux.html" title="Installation de Lizmap sous Linux Debian ou Ubuntu"
             >previous</a> |</li>
        <li><a href="../../index.html">Lizmap 1.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >Lizmap Web Client application</a> &raquo;</li>
          <li><a href="index.html" >Installing Lizmap</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, 3liz.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>